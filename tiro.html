<!doctype html>
<html lang="it">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Tiro al Bersaglio â€” Edizione Deluxe ğŸ¯</title>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="jquery-3.3.1.js"></script>
    <script src="script.js"></script>
    <style>
        :root {
            --accent: lime;
            --hud-bg: magenta;
            --text: black;
            --play-bg: #333;
        }

        * {
            box-sizing: border-box
        }

        .main-area {
            min-height: calc(100vh - 80px);
            /* 100vh meno la navbar */
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }


        .game-wrap {
            width: 95%;
            max-width: 1000px;
            background: rgba(255, 255, 255, 0.7);
            border: 5px double var(--accent);
            border-radius: 20px;
            box-shadow: 0 0 40px magenta;
            overflow: hidden;
            display: grid;
            grid-template-rows: auto 1fr;
        }

        header {
            background: var(--hud-bg);
            color: var(--text);
            padding: 12px;
            text-align: center;
            border-bottom: 4px dashed lime;
        }

        header h1 {
            font-size: 28px;
            text-shadow: 2px 2px 5px yellow;
            margin: 0;
        }

        .hud {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 8px;
            font-size: 18px;
            font-weight: bold;
        }

        main.game {
            display: flex;
            gap: 15px;
            padding: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .playfield {
            flex: 1;
            min-width: 400px;
            min-height: 400px;
            max-width: 700px;
            background: repeating-linear-gradient(45deg, #edecec, #ffdfdf 10px, #dad9d9 10px, #979797 20px);
            border: 6px groove yellow;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            cursor: crosshair;
        }

        .target {
            position: absolute;
            border-radius: 50%;
            background-size: cover;
            background-position: center;
            transition: transform 0.15s ease;
            cursor: pointer;
            border: 3px solid magenta;
            box-shadow: 0 0 20px lime;
        }

        .target:hover {
            transform: scale(1.2) rotate(5deg);
        }

        aside {
            width: 250px;
            background: linear-gradient(180deg, lime, yellow);
            padding: 10px;
            border: 3px dotted magenta;
            border-radius: 12px;
            color: black;
            font-weight: bold;
        }

        button {
            background: magenta;
            color: yellow;
            border: 3px solid lime;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            padding: 10px 15px;
            transition: 0.2s;
        }

        button:hover {
            background: lime;
            color: black;
        }

        footer {
            background: magenta;
            color: black;
            text-align: center;
            font-size: 14px;
            padding: 6px;
            border-top: 3px dashed yellow;
        }
    </style>
</head>

<body class="container">
    <div class="navbar">
        <a href="home.html">ğŸˆ Home</a>
        <a href="auguri.html">ğŸ‚ Auguri</a>
        <a href="games.html">ğŸ® Games</a>
        <a href="ecommerce.html">ğŸ›’ eCommerce</a>
        <a href="regali.html">ğŸ Regali</a>
        <a href="contatti.html">âœ¨ Contatti</a>
    </div>
    <div class="main-area">


        <div class="game-wrap">
            <header>
                <h1>ğŸ¯ Tiro al Bersaglio Deluxe ğŸ¯</h1>
                <div class="hud">
                    <div>â±ï¸ Tempo: <span id="time">30</span>s</div>
                    <div>ğŸ’¥ Punti: <span id="score">0</span></div>
                </div>
            </header>

            <main class="game">
                <section class="playfield" id="playfield"></section>
                <aside>
                    <p>ğŸ“ˆ Livello: <span id="level">1</span></p>
                    <p>ğŸ† Record: <span id="best">0</span></p>
                    <button id="startBtn">Avvia partita</button>
                    <button id="resetBtn">Reset</button>
                    <p style="margin-top:10px;">Colpisci le Anto per fare punti!</p>
                </aside>
            </main>

            <footer>ğŸ’© Estetica by "Ciccio's Studio" ğŸ’©</footer>
        </div>
    </div>
    <script>
        (() => {
            const DURATION = 30;
            const playfield = document.getElementById('playfield');
            const startBtn = document.getElementById('startBtn');
            const resetBtn = document.getElementById('resetBtn');
            const timeEl = document.getElementById('time');
            const scoreEl = document.getElementById('score');
            const bestEl = document.getElementById('best');
            const levelEl = document.getElementById('level');
            const HKEY = "tiro_bersaglio_highscore_brutto";
            let best = parseInt(localStorage.getItem(HKEY)) || 0;
            bestEl.textContent = best;

            let score = 0, level = 1, remaining = DURATION, timer, loop, running = false;

            const images = [
                "image.png",
                "download.jpeg"
            ];

            function rand(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }

            function createTarget() {
                const t = document.createElement('div');
                const size = Math.max(40, 80 - (level * 3));
                t.className = 'target';
                t.style.width = size + 'px';
                t.style.height = size + 'px';
                t.style.backgroundImage = `url(${images[rand(0, images.length - 1)]})`;
                const pfRect = playfield.getBoundingClientRect();
                const x = rand(0, pfRect.width - size);
                const y = rand(0, pfRect.height - size);
                t.style.left = x + 'px';
                t.style.top = y + 'px';

                t.addEventListener('click', () => {
                    score += 10;
                    scoreEl.textContent = score;
                    t.remove();
                });

                playfield.appendChild(t);
                setTimeout(() => t.remove(), 1000 - (level * 30));
            }

            function startGame() {
                if (running) return;
                running = true;
                score = 0;
                remaining = DURATION;
                level = 1;
                timeEl.textContent = remaining;
                scoreEl.textContent = 0;
                playfield.innerHTML = '';
                startBtn.disabled = true;
                loop = setInterval(createTarget, 800);
                timer = setInterval(() => {
                    remaining--;
                    timeEl.textContent = remaining;
                    if (remaining <= 0) endGame();
                }, 1000);
            }

            function endGame() {
                running = false;
                clearInterval(timer);
                clearInterval(loop);
                startBtn.disabled = false;
                if (score > best) {
                    best = score;
                    localStorage.setItem(HKEY, best);
                    bestEl.textContent = best;
                    alert("ğŸ˜ Nuovo record: " + score);
                } else {
                    alert("Partita finita! Punti: " + score);
                }
            }

            function resetGame() {
                localStorage.removeItem(HKEY);
                best = 0;
                bestEl.textContent = 0;
                alert("Record azzerato!");
            }

            startBtn.addEventListener('click', startGame);
            resetBtn.addEventListener('click', resetGame);
        })();
    </script>
</body>

</html>